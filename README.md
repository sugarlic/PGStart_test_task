# Тестовое задание PGStart

# Инструкция к запуску 
Запуск сервера:\
`-` make

Запуск тестов:\
`-` make tests

# Принятые решения (отдельные решения описаны в docs/)
Выбранная операционная система: MacOS \
Тесты написаны с использованием "моков" \
Создание и выполение скрипта решил реализовать отдельными запросами \
Используемый драйвер для Postgre - pgx \
В качестве примеров в папке scripts есть несколько скриптов \
Написан клиент для взаимодействия с API (client/client.go) \

Сборка клиента: \
`-` make cl_build

Список флагов: \
`-` ./cl -h

Для удобства было решено добавить обработчик для удаления команды из базы данных \
Запуск команды происходит отдельным запросом (тоже для удобства) \

# Build/Deploy приложения
В качестве платформы для CI/CD выбран GitHub Actions \
Настроен пайплайн для GitHub Actions (.github/workflows) \
Сценарий сборки описан в файлax Dockerfile и docker-compose.yaml\
Собраный образ пушится на Yandex Cloud Container Registry\
Deploy происходит на виртуальную машину Yandex Cloud\
Сервер доступен по адресу:\
`IP` 158.160.85.99

# Примеры запросов
Получение списка команд в формате json:\
`-` curl http://158.160.85.99:8080/ \

Получение команды в формате json (command_id -  id команды в базе данных):\
`-` curl "http://158.160.85.99:8080/command?id=<command_id>" \

Создание команды в базе данных \
`-` curl -X POST "http://84.252.140.153:8080/command/create" \
     -H "Content-Type: application/json" \
     -d "{\"ID\":1, \"Title\":\"<script_title>\", \"Content\":\"script_conent\"}"\

Запуск команды \
`-` curl "http://158.160.85.99:8080/exec?id=<command_id>" \

Запуск удаление команды из базы данных \
`-` curl -X DELETE "http://158.160.85.99:8080/command/delete?id=<command_id>" \